#-----------------------------------------------------------------------------
# myc (onebox, et al)
# assumption is you're running this at maps root dir
#-----------------------------------------------------------------------------

MYC_ENV ?= ydev

MYC_BASE := $(SRCTOP)/myc/
MYC_TARGET := /home/y/share/htdocs/static.myc/


# not sure about these...
MYC_BUILD := $(MYC_TMP)build/
MYC_SRC := $(MYC_TMP)src/
MYC_SAMPLES := $(MYC_TMP)samples/
MYC_TESTS := $(MYC_TMP)tests/


myc_build:
	#[ -e /home/y/bin/node ] || $(YINST_BIN) install -branch current ynodejs06
	# cd $(MYC_BASE); exec /home/y/bin/node --file_accessdir=$(MYC_BASE) --open_basedir=$(MYC_BASE) scripts/myc.js -build --env $(MYC_ENV)
	# todo - builds for ALL environments
	$(YROOT_BIN) $(YROOT_RUNTIME) --cmd 'sudo rm -rf $(MYC_TARGET)'
	$(YROOT_BIN) $(YROOT_RUNTIME) --cmd 'sudo mkdir $(MYC_TARGET)'
	$(YROOT_BIN) $(YROOT_RUNTIME) --cmd 'cd $(MYC_TARGET); sudo ln -s $(MYC_BASE)build/'
	$(YROOT_BIN) $(YROOT_RUNTIME) --cmd 'cd $(MYC_TARGET); sudo ln -s $(MYC_BASE)embed-build/'
	$(YROOT_BIN) $(YROOT_RUNTIME) --cmd 'cd $(MYC_TARGET); sudo ln -s $(MYC_BASE)samples/'
	$(YROOT_BIN) $(YROOT_RUNTIME) --cmd 'cd $(MYC_TARGET); sudo ln -s $(MYC_BASE)src/'

